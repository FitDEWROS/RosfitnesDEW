<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Раздел: Упражнения</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .page-title { margin: 12px 16px 0; font-size: clamp(22px, 5vw, 36px); }
    .muscle-wrap { display:flex; flex-direction:column; align-items:center; gap:18px; padding:10px 16px 80px; }
    .view-switch { display:flex; gap:8px; }
    .view-switch button{
      background: var(--card); color: var(--text);
      border:1px solid var(--card-border); border-radius: 10px;
      padding:8px 12px; cursor:pointer;
    }
    .view-switch button.active{ outline:2px solid var(--accent); }
    .canvas { width:100%; max-width:360px; }
    object { width:100%; height:auto; display:block; }
    .info {
      position: sticky; bottom: 16px; max-width: 560px;
      width: calc(100% - 32px);
      background: var(--card); border:1px solid var(--card-border);
      border-radius:16px; padding:14px 16px; color:var(--text);
      box-shadow: 0 6px 26px rgba(0,0,0,.35);
    }
    .info h3{ margin:0 0 6px; color: var(--accent); font-size: 18px; }
    .info ul{ margin:0; padding-left:18px; }
    .legend { opacity:.75; font-size: 12px; margin-top:6px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="header">
      <h1 class="page-title">Раздел: Упражнения</h1>
    </header>

    <main class="muscle-wrap" aria-live="polite">
      <div class="view-switch" role="tablist" aria-label="Выбор вида тела">
        <button id="btnFront" class="active" role="tab" aria-selected="true">Вид спереди</button>
        <button id="btnBack" role="tab" aria-selected="false">Вид сзади</button>
      </div>

      <!-- ====== ВИД СПЕРЕДИ ====== -->
      <div id="frontView" class="canvas">
        <object id="svgFront" type="image/svg+xml" data="front.svg"></object>
      </div>

      <!-- ====== ВИД СЗАДИ ====== -->
      <div id="backView" class="canvas" hidden>
        <object id="svgBack" type="image/svg+xml" data="back.svg"></object>
      </div>


      <section id="info" class="info" aria-live="polite">
        <h3>Выбери мышцу</h3>
        <p class="legend">Нажми на область на силуэте, чтобы увидеть упражнения.</p>
      </section>
    </main>
  </div>

  <script>
    const btnFront = document.getElementById('btnFront');
    const btnBack  = document.getElementById('btnBack');
    const front    = document.getElementById('frontView');
    const back     = document.getElementById('backView');
    const info     = document.getElementById('info');

    function setView(isFront){
      front.hidden = !isFront;
      back.hidden  = isFront;
      btnFront.classList.toggle('active', isFront);
      btnBack.classList.toggle('active', !isFront);
      btnFront.setAttribute('aria-selected', String(isFront));
      btnBack.setAttribute('aria-selected', String(!isFront));
      info.innerHTML = `<h3>Выбери мышцу</h3><p class="legend">Нажми на область на силуэте, чтобы увидеть упражнения.</p>`;
    }
    btnFront.onclick = () => setView(true);
    btnBack.onclick  = () => setView(false);

    // ===== Упражнения по мышцам =====
    const DB = {
      'chest':['Жим лёжа','Отжимания','Сведение рук в тренажёре'],
      'abs':['Скручивания','Подъём ног в висе','Планка'],
      'biceps-left':['Подъём штанги на бицепс','Гантели сидя'],
      'biceps-right':['Подъём штанги на бицепс','Гантели сидя'],
      'traps':['Шраги','Тяга к подбородку'],
      'lats-left':['Тяга блока','Тяга в наклоне'],
      'lats-right':['Тяга блока','Тяга в наклоне'],
      'glutes-left':['Ягодичный мост','Румынская тяга'],
      'glutes-right':['Ягодичный мост','Румынская тяга'],
      // ...дополни все id
    };

    function attachHandlers(obj){
      obj.addEventListener("load", () => {
        const svgDoc = obj.contentDocument;
        svgDoc.querySelectorAll(".muscle").forEach(el=>{
          el.addEventListener("click", ()=>{
            svgDoc.querySelectorAll(".muscle").forEach(m=>m.classList.remove("active"));
            el.classList.add("active");
            const list = DB[el.id] || ['Упражнения не найдены'];
            info.innerHTML = `<h3>${humanName(el.id)}</h3><ul>${list.map(x=>`<li>${x}</li>`).join('')}</ul>`;
          });
        });
      });
    }
    attachHandlers(document.getElementById("svgFront"));
    attachHandlers(document.getElementById("svgBack"));

    function humanName(id){
      const map = { chest:"Грудь", abs:"Пресс", "biceps-left":"Бицепс (лево)", "biceps-right":"Бицепс (право)",
                    traps:"Трапеции","lats-left":"Широчайшая (лево)","lats-right":"Широчайшая (право)",
                    "glutes-left":"Ягодицы (лево)","glutes-right":"Ягодицы (право)" };
      return map[id] || id;
    }
  </script>
</body>
</html>
