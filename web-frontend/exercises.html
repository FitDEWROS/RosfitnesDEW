<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–†–∞–∑–¥–µ–ª: –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .page-title { margin: 12px 16px 0; font-size: clamp(22px, 5vw, 36px); }
    .muscle-wrap { display:flex; flex-direction:column; align-items:center; gap:18px; padding:10px 16px 80px; }
    .view-switch { display:flex; gap:8px; flex-wrap:wrap; }
    .view-switch button{
      background: var(--card); color: var(--text);
      border:1px solid var(--card-border); border-radius: 10px;
      padding:8px 12px; cursor:pointer;
    }
    .view-switch button.active{ outline:2px solid var(--accent); }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .canvas { width:100%; max-width: 640px; }
    .svg-host { 
      height: clamp(560px, 86vh, 1200px);  /* —á–µ–ª–æ–≤–µ–∫ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —ç–∫—Ä–∞–Ω */
      width: auto; 
      display:block; 
      margin-inline:auto; 
    }

    /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    .muscle:hover { fill: rgba(139,92,246,0.25); stroke:#8b5cf6; stroke-width:2; }

    /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º—ã—à—Ü—ã */
    .muscle.active { fill: rgba(139,92,246,0.55); stroke:#8b5cf6; stroke-width:2; cursor: pointer; }

    /* –ù–µ–≤–∏–¥–∏–º–∞—è ¬´–ø–æ–¥—É—à–∫–∞¬ª –∫–ª–∏–∫–∞ */
    .muscle { transition: fill .3s, stroke .3s; stroke: transparent; stroke-width: 20px; pointer-events: auto; }

    /* üîß –û—Ç–ª–∞–¥–∫–∞ */
    .muscle-test { fill: red !important; opacity: 0.5; }

    .info {
      position: sticky; bottom: 16px; max-width: 560px;
      width: calc(100% - 32px);
      background: var(--card); border:1px solid var(--card-border);
      border-radius:16px; padding:14px 16px; color:var(--text);
      box-shadow: 0 6px 26px rgba(0,0,0,.35);
    }
    .info h3{ margin:0 0 6px; color: var(--accent); font-size: 18px; }
    .info ul{ margin:0; padding-left:18px; }
    .legend { opacity:.75; font-size: 12px; margin-top:6px; }

    .debug-toggle {
      margin: 6px;
      padding:6px 10px;
      border:1px solid var(--card-border);
      border-radius:8px;
      cursor:pointer;
      background: var(--card);
      color: var(--text);
    }
    .debug-toggle.active { outline:2px solid crimson; color: crimson; }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="header">
      <h1 class="page-title">–†–∞–∑–¥–µ–ª: –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</h1>
    </header>

    <main class="muscle-wrap" aria-live="polite">
      <div class="view-switch" role="tablist" aria-label="–í—ã–±–æ—Ä –≤–∏–¥–∞ —Ç–µ–ª–∞">
        <button id="btnFront" class="active" role="tab" aria-selected="true">–í–∏–¥ —Å–ø–µ—Ä–µ–¥–∏</button>
        <button id="btnBack" role="tab" aria-selected="false">–í–∏–¥ —Å–∑–∞–¥–∏</button>
        <button id="btnDebug" class="debug-toggle">–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏</button>
      </div>

      <!-- ====== –í–ò–î –°–ü–ï–†–ï–î–ò ====== -->
      <div id="frontView" class="canvas">
        <object id="svgFront" class="svg-host" type="image/svg+xml" data="front.svg"></object>
      </div>

      <!-- ====== –í–ò–î –°–ó–ê–î–ò ====== -->
      <div id="backView" class="canvas" hidden>
        <object id="svgBack" class="svg-host" type="image/svg+xml" data="back.svg"></object>
      </div>

      <section id="info" class="info" aria-live="polite">
        <h3>–í—ã–±–µ—Ä–∏ –º—ã—à—Ü—É</h3>
        <p class="legend">–ù–∞–∂–º–∏ –Ω–∞ –æ–±–ª–∞—Å—Ç—å –Ω–∞ —Å–∏–ª—É—ç—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è.</p>
      </section>
    </main>
  </div>

  <script>
    const btnFront = document.getElementById('btnFront');
    const btnBack  = document.getElementById('btnBack');
    const btnDebug = document.getElementById('btnDebug');
    const front    = document.getElementById('frontView');
    const back     = document.getElementById('backView');
    const info     = document.getElementById('info');

    let debugMode = false;

    btnDebug.onclick = () => {
      debugMode = !debugMode;
      btnDebug.classList.toggle("active", debugMode);
      btnDebug.textContent = debugMode ? "–û—Ç–ª–∞–¥–∫–∞: –í–ö–õ" : "–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏";
    };

    function setView(isFront){
      front.hidden = !isFront;
      back.hidden  = isFront;
      btnFront.classList.toggle('active', isFront);
      btnBack.classList.toggle('active', !isFront);
      btnFront.setAttribute('aria-selected', String(isFront));
      btnBack.setAttribute('aria-selected', String(!isFront));
      info.innerHTML = `<h3>–í—ã–±–µ—Ä–∏ –º—ã—à—Ü—É</h3><p class="legend">–ù–∞–∂–º–∏ –Ω–∞ –æ–±–ª–∞—Å—Ç—å –Ω–∞ —Å–∏–ª—É—ç—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è.</p>`;
    }
    btnFront.onclick = () => setView(true);
    btnBack.onclick  = () => setView(false);

    // ===== –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ –º—ã—à—Ü–∞–º =====
    const DB = {
      chest:['–ñ–∏–º –ª—ë–∂–∞','–û—Ç–∂–∏–º–∞–Ω–∏—è','–°–≤–µ–¥–µ–Ω–∏–µ —Ä—É–∫ –≤ —Ç—Ä–µ–Ω–∞–∂—ë—Ä–µ'],
      abs:['–°–∫—Ä—É—á–∏–≤–∞–Ω–∏—è','–ü–æ–¥—ä—ë–º –Ω–æ–≥ –≤ –≤–∏—Å–µ','–ü–ª–∞–Ω–∫–∞'],
      'biceps-left':['–ü–æ–¥—ä—ë–º —à—Ç–∞–Ω–≥–∏ –Ω–∞ –±–∏—Ü–µ–ø—Å','–ì–∞–Ω—Ç–µ–ª–∏ —Å–∏–¥—è'],
      'biceps-right':['–ü–æ–¥—ä—ë–º —à—Ç–∞–Ω–≥–∏ –Ω–∞ –±–∏—Ü–µ–ø—Å','–ì–∞–Ω—Ç–µ–ª–∏ —Å–∏–¥—è'],
      'delts-left':['–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π —Å–∏–¥—è','–†–∞–∑–≤–æ–¥–∫–∞ –≥–∞–Ω—Ç–µ–ª–µ–π —Å—Ç–æ—è'],
      'delts-right':['–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π —Å–∏–¥—è','–†–∞–∑–≤–æ–¥–∫–∞ –≥–∞–Ω—Ç–µ–ª–µ–π —Å—Ç–æ—è'],
      'forearm-left':['–°–≥–∏–±–∞–Ω–∏—è –∫–∏—Å—Ç–µ–π —Å–æ —à—Ç–∞–Ω–≥–æ–π','–û–±—Ä–∞—Ç–Ω—ã–µ —Å–≥–∏–±–∞–Ω–∏—è'],
      'forearm-right':['–°–≥–∏–±–∞–Ω–∏—è –∫–∏—Å—Ç–µ–π —Å–æ —à—Ç–∞–Ω–≥–æ–π','–û–±—Ä–∞—Ç–Ω—ã–µ —Å–≥–∏–±–∞–Ω–∏—è'],
      'obliques-left':['–†—É—Å—Å–∫–∏–µ —Å–∫—Ä—É—á–∏–≤–∞–Ω–∏—è','–ë–æ–∫–æ–≤–∞—è –ø–ª–∞–Ω–∫–∞'],
      'obliques-right':['–†—É—Å—Å–∫–∏–µ —Å–∫—Ä—É—á–∏–≤–∞–Ω–∏—è','–ë–æ–∫–æ–≤–∞—è –ø–ª–∞–Ω–∫–∞'],
      'quads-left':['–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è','–í—ã–ø–∞–¥—ã','–ñ–∏–º –Ω–æ–≥–∞–º–∏'],
      'quads-right':['–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è','–í—ã–ø–∞–¥—ã','–ñ–∏–º –Ω–æ–≥–∞–º–∏'],
      'calves-left':['–ü–æ–¥—ä—ë–º—ã –Ω–∞ –Ω–æ—Å–∫–∏ —Å—Ç–æ—è','–ü–æ–¥—ä—ë–º—ã —Å–∏–¥—è'],
      'calves-right':['–ü–æ–¥—ä—ë–º—ã –Ω–∞ –Ω–æ—Å–∫–∏ —Å—Ç–æ—è','–ü–æ–¥—ä—ë–º—ã —Å–∏–¥—è'],
      traps:['–®—Ä–∞–≥–∏','–¢—è–≥–∞ –∫ –ø–æ–¥–±–æ—Ä–æ–¥–∫—É'],
      'rear-delts-left':['–û–±—Ä–∞—Ç–Ω–∞—è —Ä–∞–∑–≤–æ–¥–∫–∞','–¢—è–≥–∞ –∫ –ª–∏—Ü—É'],
      'rear-delts-right':['–û–±—Ä–∞—Ç–Ω–∞—è —Ä–∞–∑–≤–æ–¥–∫–∞','–¢—è–≥–∞ –∫ –ª–∏—Ü—É'],
      'lats-left':['–¢—è–≥–∞ –±–ª–æ–∫–∞','–¢—è–≥–∞ –≤ –Ω–∞–∫–ª–æ–Ω–µ'],
      'lats-right':['–¢—è–≥–∞ –±–ª–æ–∫–∞','–¢—è–≥–∞ –≤ –Ω–∞–∫–ª–æ–Ω–µ'],
      'triceps-left':['–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –∂–∏–º','–†–∞–∑–≥–∏–±–∞–Ω–∏—è –Ω–∞ –±–ª–æ–∫–µ'],
      'triceps-right':['–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –∂–∏–º','–†–∞–∑–≥–∏–±–∞–Ω–∏—è –Ω–∞ –±–ª–æ–∫–µ'],
      erectors:['–ì–∏–ø–µ—Ä—ç–∫—Å—Ç–µ–Ω–∑–∏—è','–¢—è–≥–∞ —Å –ø–æ–ª–∞'],
      'glutes-left':['–Ø–≥–æ–¥–∏—á–Ω—ã–π –º–æ—Å—Ç','–†—É–º—ã–Ω—Å–∫–∞—è —Ç—è–≥–∞'],
      'glutes-right':['–Ø–≥–æ–¥–∏—á–Ω—ã–π –º–æ—Å—Ç','–†—É–º—ã–Ω—Å–∫–∞—è —Ç—è–≥–∞'],
      'hams-left':['–°–≥–∏–±–∞–Ω–∏—è –Ω–æ–≥ –ª—ë–∂–∞','–¢—è–≥–∞ —Ä—É–º—ã–Ω—Å–∫–∞—è'],
      'hams-right':['–°–≥–∏–±–∞–Ω–∏—è –Ω–æ–≥ –ª—ë–∂–∞','–¢—è–≥–∞ —Ä—É–º—ã–Ω—Å–∫–∞—è'],
      'calves-back-left':['–ü–æ–¥—ä—ë–º—ã –Ω–∞ –Ω–æ—Å–∫–∏ —Å—Ç–æ—è','–û—Å–ª–∏–Ω—ã–µ –ø–æ–¥—ä—ë–º—ã'],
      'calves-back-right':['–ü–æ–¥—ä—ë–º—ã –Ω–∞ –Ω–æ—Å–∫–∏ —Å—Ç–æ—è','–û—Å–ª–∏–Ω—ã–µ –ø–æ–¥—ä—ë–º—ã'],
    };

    function attachHandlers(obj){
      obj.addEventListener("load", () => {
        const svgDoc = obj.contentDocument || obj.getSVGDocument();
        if (!svgDoc) return;

        // –≤—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –≤–Ω—É—Ç—Ä—å svg
        const style = svgDoc.createElement("style");
        style.textContent = `
          .muscle { transition: fill .3s, stroke .3s; stroke: transparent; stroke-width: 20px; pointer-events:auto; cursor: pointer; }
          .muscle:hover { fill: rgba(139,92,246,0.25); stroke:#8b5cf6; stroke-width:2px; }
          .muscle.active { fill: rgba(139,92,246,0.55); stroke:#8b5cf6; stroke-width:2px; }
          .muscle-test { fill:red !important; opacity:0.5; }
        `;
        const svgRoot = svgDoc.querySelector("svg");
        if (svgRoot) svgRoot.appendChild(style);

        // –Ω–∞–≤–µ—à–∏–≤–∞–µ–º –∫–ª–∞—Å—Å muscle —Ç–æ–ª—å–∫–æ —Ç–µ–º path, —É –∫–æ–≥–æ –µ—Å—Ç—å id –∏–∑ –±–∞–∑—ã
        Object.keys(DB).forEach(id => {
          const el = svgDoc.getElementById(id);
          if (el) el.classList.add('muscle');
        });

        // –∫–ª–∏–∫–∏ –ø–æ –º—ã—à—Ü–∞–º
        svgDoc.querySelectorAll("path").forEach(el => {
          el.addEventListener("pointerdown", () => {
            svgDoc.querySelectorAll(".muscle.active").forEach(m => m.classList.remove("active","muscle-test"));

            const id = el.id || "(–±–µ–∑ id)";
            const d = el.getAttribute("d") || "";
            const match = d.match(/M\s*([0-9.\-]+),\s*([0-9.\-]+)/i);
            const coords = match ? `X=${match[1]}, Y=${match[2]}` : "–Ω–µ –Ω–∞–π–¥–µ–Ω—ã";

            if (DB[el.id]) el.classList.add('muscle');

            if (debugMode) {
              el.classList.add("muscle-test");
              alert(`–ú—ã—à—Ü–∞: ${id}\n–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${coords}`);
              console.log(`–ú—ã—à—Ü–∞: ${id}, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${coords}`);
              return;
            }

            if (el.classList.contains("muscle")) {
              el.classList.add("active");
              const list = (DB[el.id] && DB[el.id].length) ? DB[el.id] : ['–ù–µ—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π'];
              info.innerHTML = `<h3>${humanName(el.id)}</h3><ul>${list.map(x=>`<li>${x}</li>`).join('')}</ul>`;
            }
          });
        });
      });
    }

    attachHandlers(document.getElementById("svgFront"));
    attachHandlers(document.getElementById("svgBack"));

    function humanName(id){
      const map = {
        chest:"–ì—Ä—É–¥—å", abs:"–ü—Ä–µ—Å—Å",
        "biceps-left":"–ë–∏—Ü–µ–ø—Å (–ª–µ–≤–æ)", "biceps-right":"–ë–∏—Ü–µ–ø—Å (–ø—Ä–∞–≤–æ)",
        "delts-left":"–ü–ª–µ—á–æ (–¥–µ–ª—å—Ç–∞, –ª–µ–≤–æ)", "delts-right":"–ü–ª–µ—á–æ (–¥–µ–ª—å—Ç–∞, –ø—Ä–∞–≤–æ)",
        "forearm-left":"–ü—Ä–µ–¥–ø–ª–µ—á—å–µ (–ª–µ–≤–æ)", "forearm-right":"–ü—Ä–µ–¥–ø–ª–µ—á—å–µ (–ø—Ä–∞–≤–æ)",
        "obliques-left":"–ö–æ—Å—ã–µ (–ª–µ–≤–æ)", "obliques-right":"–ö–æ—Å—ã–µ (–ø—Ä–∞–≤–æ)",
        "quads-left":"–ö–≤–∞–¥—Ä–∏—Ü–µ–ø—Å (–ª–µ–≤–æ)", "quads-right":"–ö–≤–∞–¥—Ä–∏—Ü–µ–ø—Å (–ø—Ä–∞–≤–æ)",
        "calves-left":"–ò–∫—Ä—ã (–ª–µ–≤–æ)", "calves-right":"–ò–∫—Ä—ã (–ø—Ä–∞–≤–æ)",
        traps:"–¢—Ä–∞–ø–µ—Ü–∏–∏",
        "rear-delts-left":"–ó–∞–¥–Ω—è—è –¥–µ–ª—å—Ç–∞ (–ª–µ–≤–æ)", "rear-delts-right":"–ó–∞–¥–Ω—è—è –¥–µ–ª—å—Ç–∞ (–ø—Ä–∞–≤–æ)",
        "lats-left":"–®–∏—Ä–æ—á–∞–π—à–∞—è (–ª–µ–≤–æ)", "lats-right":"–®–∏—Ä–æ—á–∞–π—à–∞—è (–ø—Ä–∞–≤–æ)",
        "triceps-left":"–¢—Ä–∏—Ü–µ–ø—Å (–ª–µ–≤–æ)", "triceps-right":"–¢—Ä–∏—Ü–µ–ø—Å (–ø—Ä–∞–≤–æ)",
        erectors:"–†–∞–∑–≥–∏–±–∞—Ç–µ–ª–∏ —Å–ø–∏–Ω—ã",
        "glutes-left":"–Ø–≥–æ–¥–∏—Ü—ã (–ª–µ–≤–æ)", "glutes-right":"–Ø–≥–æ–¥–∏—Ü—ã (–ø—Ä–∞–≤–æ)",
        "hams-left":"–ë–∏—Ü–µ–ø—Å –±–µ–¥—Ä–∞ (–ª–µ–≤–æ)", "hams-right":"–ë–∏—Ü–µ–ø—Å –±–µ–¥—Ä–∞ (–ø—Ä–∞–≤–æ)",
        "calves-back-left":"–ò–∫—Ä—ã (–ª–µ–≤–æ, —Å–∑–∞–¥–∏)", "calves-back-right":"–ò–∫—Ä—ã (–ø—Ä–∞–≤–æ, —Å–∑–∞–¥–∏)"
      };
      return map[id] || id || "–ë–µ–∑ id";
    }
  </script>
</body>
</html>
