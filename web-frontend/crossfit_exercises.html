<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RosApp ‚Äî –ö—Ä–æ—Å—Å—Ñ–∏—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</title>

  <!-- üß© –®—Ä–∏—Ñ—Ç—ã –∏ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* ===============================
       ‚öôÔ∏è –¢–µ–º–∞ –∏ –±–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    =============================== */
    :root {
      --bg: #111113;
      --text: #ffffff;
      --card: rgba(255,255,255,0.05);
      --card-border: rgba(255,255,255,0.1);
      --accent: #8b5cf6;
    }
    html.light {
      --bg: #f5f7fa;
      --text: #111113;
      --card: #ffffff;
      --card-border: rgba(0,0,0,0.1);
      --accent: #3b82f6;
    }

    body.page-crossfit {
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', sans-serif;
      transition: background 0.3s ease, color 0.3s ease;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ===============================
       üåà –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è —à–∞–ø–∫–∞
    =============================== */
    .cf-header {
      position: sticky;
      top: 0;
      z-index: 20;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 18px;
      background: linear-gradient(120deg, #8b5cf6, #3b82f6, #6366f1);
      background-size: 200% 200%;
      animation: gradientShift 6s ease-in-out infinite alternate;
      color: #fff;
      border-bottom: 1px solid rgba(255,255,255,0.15);
      box-shadow: 0 4px 18px rgba(0,0,0,0.35);
      backdrop-filter: blur(10px);
    }
    @keyframes gradientShift {
      from { background-position: 0% 50%; }
      to { background-position: 100% 50%; }
    }

    .brand-mini {
      display: flex;
      align-items: center;
      gap: 8px;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
    }
    .brand-mini lottie-player {
      width: 38px;
      height: 38px;
    }
    .app-title {
      font-weight: 700;
      font-size: 1.2rem;
      letter-spacing: 0.3px;
    }

    /* –ö–Ω–æ–ø–∫–∞ –ù–∞–∑–∞–¥ */
    .nav-btn {
      background: rgba(255,255,255,0.15);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.25);
      border-radius: 10px;
      padding: 8px 16px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: 0 0 10px rgba(255,255,255,0.15);
    }
    .nav-btn:hover {
      background: rgba(255,255,255,0.25);
      transform: translateY(-1px);
      box-shadow: 0 0 12px rgba(255,255,255,0.25);
    }
    .nav-btn:active { transform: scale(0.97); }

    html.light .cf-header {
      background: linear-gradient(120deg, #93c5fd, #a78bfa, #60a5fa);
      border-bottom: 1px solid rgba(0,0,0,0.1);
      color: #111;
    }
    html.light .nav-btn {
      color: #111;
      background: rgba(255,255,255,0.7);
      border: 1px solid rgba(0,0,0,0.1);
      box-shadow: 0 0 6px rgba(0,0,0,0.1);
    }

    /* ===============================
       üèãÔ∏è –°–µ—Ç–∫–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
    =============================== */
    .cf-main {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 18px;
      padding: 24px 16px 40px;
      justify-items: center;
      flex-grow: 1;
    }

    .exercise-card {
      background: var(--card);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      width: 100%;
      max-width: 260px;
      overflow: hidden;
      text-align: center;
      color: var(--text);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 2px 10px rgba(0,0,0,0.25);
      opacity: 0;
      transform: translateY(15px);
    }
    .exercise-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 6px 22px var(--accent);
    }

    .thumb {
      position: relative;
      height: 160px;
      background: #000;
    }
    .thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.8);
      transition: transform 0.3s ease, filter 0.3s ease;
    }
    .exercise-card:hover img {
      transform: scale(1.05);
      filter: brightness(1);
    }
    .overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2.2rem;
      text-shadow: 0 0 10px rgba(0,0,0,0.6);
      pointer-events: none;
    }

    .exercise-card h3 {
      font-size: 1.05rem;
      font-weight: 600;
      margin: 12px 0 6px;
    }
    .exercise-card p {
      font-size: 0.9rem;
      opacity: 0.85;
      padding: 0 10px 12px;
    }

    /* ===============================
       üé• –í–∏–¥–µ–æ-–º–æ–¥–∞–ª–∫–∞
    =============================== */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 200;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      justify-content: center;
      align-items: center;
    }
    .modal.show { display: flex; }

    .video-modal {
      position: relative;
      background: var(--card);
      border: 1px solid var(--card-border);
      border-radius: 20px;
      padding: 20px 24px 28px;
      max-width: 420px;
      width: 90%;
      color: var(--text);
      text-align: center;
      box-shadow: 0 8px 30px rgba(0,0,0,0.4);
      animation: modalAppear 0.3s ease forwards;
    }
    video {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
    }

    @keyframes modalAppear {
      from { opacity: 0; transform: translateY(20px) scale(0.97); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .close {
      position: absolute;
      right: 16px;
      top: 8px;
      font-size: 28px;
      cursor: pointer;
      color: var(--text);
      opacity: 0.7;
      transition: opacity 0.2s;
    }
    .close:hover { opacity: 1; }
  </style>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
</head>

<body class="page-crossfit">
  <div class="wrap">

    <!-- üîπ –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è —à–∞–ø–∫–∞ -->
    <header class="cf-header">
      <button id="backBtn" class="nav-btn">‚Üê –ù–∞–∑–∞–¥</button>
      <div class="brand-mini">
        <lottie-player src="https://assets4.lottiefiles.com/packages/lf20_q5pk6p1k.json"
          background="transparent" speed="1" loop autoplay></lottie-player>
        <span class="app-title">RosApp</span>
      </div>
    </header>

    <!-- üèãÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="cf-main" id="exerciseList" aria-live="polite"></main>
  </div>

  <!-- üé• –ú–æ–¥–∞–ª–∫–∞ –≤–∏–¥–µ–æ -->
  <div id="videoModal" class="modal">
    <div class="video-modal">
      <span class="close" id="closeVideo">&times;</span>
      <video id="exerciseVideo" controls playsinline></video>
      <h3 id="videoTitle"></h3>
      <p id="videoDesc"></p>
    </div>
  </div>

  <script>
    // üåó –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É
    (function() {
      const theme = localStorage.getItem("theme") || "dark";
      document.documentElement.classList.toggle("light", theme === "light");
    })();

    // üèãÔ∏è –î–∞–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
    const exercises = [
      { name: "–ë—ë—Ä–ø–∏", desc: "–ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –Ω–∞ –≤—Å—ë —Ç–µ–ª–æ: –ø—Ä—ã–∂–æ–∫, –ø–ª–∞–Ω–∫–∞, –æ—Ç–∂–∏–º–∞–Ω–∏–µ.", thumb: "thumbs/burpee.jpg", video: "videos/burpee.mp4" },
      { name: "–¢—Ä–∞—Å—Ç–µ—Ä—ã", desc: "–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø—Ä–∏—Å–µ–¥–∞–Ω–∏—è –∏ –∂–∏–º–∞ —à—Ç–∞–Ω–≥–∏ –≤–≤–µ—Ä—Ö.", thumb: "thumbs/thruster.jpg", video: "videos/thruster.mp4" },
      { name: "–ì—Ä–µ–±–ª—è", desc: "–ö–∞—Ä–¥–∏–æ-–Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –≤—Å—ë —Ç–µ–ª–æ —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –Ω–æ–≥–∏ –∏ —Å–ø–∏–Ω—É.", thumb: "thumbs/row.jpg", video: "videos/row.mp4" },
      { name: "–ü—Ä—ã–∂–∫–∏ –Ω–∞ —Ç—É–º–±—É", desc: "–†–∞–∑–≤–∏–≤–∞—é—Ç —Å–∏–ª—É –Ω–æ–≥ –∏ –≤–∑—Ä—ã–≤–Ω—É—é –º–æ—â—å.", thumb: "thumbs/boxjump.jpg", video: "videos/boxjump.mp4" },
      { name: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è", desc: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –¥–ª—è —Å–ø–∏–Ω—ã –∏ —Ä—É–∫.", thumb: "thumbs/pullup.jpg", video: "videos/pullup.mp4" },
      { name: "–û—Ç–∂–∏–º–∞–Ω–∏—è –≤ —Å—Ç–æ–π–∫–µ –Ω–∞ —Ä—É–∫–∞—Ö", desc: "–†–∞–∑–≤–∏—Ç–∏–µ –ø–ª–µ—á–µ–≤–æ–≥–æ –ø–æ—è—Å–∞ –∏ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è.", thumb: "thumbs/hspu.jpg", video: "videos/hspu.mp4" },
      { name: "–°—Ç–∞–Ω–æ–≤–∞—è —Ç—è–≥–∞", desc: "–ë–∞–∑–æ–≤–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –¥–ª—è —Å–ø–∏–Ω—ã, –Ω–æ–≥ –∏ —Ö–≤–∞—Ç–∞.", thumb: "thumbs/deadlift.jpg", video: "videos/deadlift.mp4" },
      { name: "–°–ø—Ä–∏–Ω—Ç", desc: "–í—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –Ω–∞ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å.", thumb: "thumbs/sprint.jpg", video: "videos/sprint.mp4" },
      { name: "–†—É—Å—Å–∫–∏–µ —Å–∫—Ä—É—á–∏–≤–∞–Ω–∏—è", desc: "–†–∞–∑–≤–∏—Ç–∏–µ –º—ã—à—Ü –∫–æ—Ä–∞ –∏ –∫–æ—Å—ã—Ö –º—ã—à—Ü –∂–∏–≤–æ—Ç–∞.", thumb: "thumbs/russian_twist.jpg", video: "videos/russian_twist.mp4" }
    ];

    // üß± –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
    const list = document.getElementById("exerciseList");
    exercises.forEach((ex, i) => {
      const card = document.createElement("div");
      card.className = "exercise-card";
      card.innerHTML = `
        <div class="thumb">
          <img src="${ex.thumb}" alt="${ex.name}">
          <div class="overlay">‚ñ∂</div>
        </div>
        <h3>${ex.name}</h3>
        <p>${ex.desc}</p>
      `;
      card.addEventListener("click", () => openVideoModal(ex));
      list.appendChild(card);
      // –ø–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
      setTimeout(() => { card.style.opacity = 1; card.style.transform = "translateY(0)"; }, 100 * i);
    });

    // üîô –ù–∞–∑–∞–¥
    document.getElementById("backBtn").addEventListener("click", () => {
      window.location.href = "index.html";
    });

    // üé• –ú–æ–¥–∞–ª–∫–∞ –≤–∏–¥–µ–æ
    function openVideoModal(ex) {
      const modal = document.getElementById("videoModal");
      const video = document.getElementById("exerciseVideo");
      document.getElementById("videoTitle").textContent = ex.name;
      document.getElementById("videoDesc").textContent = ex.desc;
      video.src = ex.video;
      modal.classList.add("show");
    }

    document.getElementById("closeVideo").addEventListener("click", closeModal);
    window.addEventListener("click", (e) => {
      const modal = document.getElementById("videoModal");
      if (e.target === modal) closeModal();
    });

    function closeModal() {
      const modal = document.getElementById("videoModal");
      const video = document.getElementById("exerciseVideo");
      modal.classList.remove("show");
      video.pause();
      video.src = "";
    }
  </script>
</body>
</html>
